plugins {
    id 'java'
}

group 'eu.tsystems.mms.tic.testerra.skeletons'
version '1.0-SNAPSHOT'

compileJava.options.encoding = 'UTF-8'
compileTestJava.options.encoding = "UTF-8"

targetCompatibility = 1.8

dependencies {
    implementation 'eu.tsystems.mms.tic.testerra:core:1-SNAPSHOT'
}

repositories {
    mavenLocal()
    mavenCentral()
}


test {
    // define as
    //      key: profile name
    //      value: testng suite xml filename
    def profiles = [
            "everything": "Everything.xml"
    ]

    /*
    create suite def
     */
    def suiteFiles = []
    profiles.each { k, v ->
        if (project.hasProperty("" + k)) {
            def f = 'TestSuites/' + v
            suiteFiles << f
        }
    }

    useTestNG() {
        suites(suiteFiles as String[])
    }

    testLogging {
        outputs.upToDateWhen { false }
        showStandardStreams = true
    }

    options {
        systemProperties(System.getProperties())
    }

    // basically execution returns "GREEN" (framework exits with exit code > 0 if there were failures)
    ignoreFailures = true
}
